# Configuration for Cog ⚙️
# Reference: https://github.com/replicate/cog/blob/main/docs/yaml.md
# https://pytorch.org/get-started/previous-versions/
# https://pytorch.org/blog/deprecation-cuda-python-support/
# https://pytorch.org/get-started/locally/

build:
  gpu: true
  cuda: "12.1"

  python_version: "3.10"

  system_packages:
    - "libgl1-mesa-glx"
    - "libglib2.0-0"
  
  python_requirements: requirements.txt 

  run: 
    - git clone https://github.com/IDEA-Research/Grounded-Segment-Anything && cd ./Grounded-Segment-Anything && pip install -q -r requirements.txt
    - cd ./Grounded-Segment-Anything/GroundingDINO && python3 -m pip install -q .
    - cd ./Grounded-Segment-Anything/segment_anything && python3 -m pip install -q .

predict: "predict.py:Predictor"

image: "r8.im/alexgenovese/bg-remover"